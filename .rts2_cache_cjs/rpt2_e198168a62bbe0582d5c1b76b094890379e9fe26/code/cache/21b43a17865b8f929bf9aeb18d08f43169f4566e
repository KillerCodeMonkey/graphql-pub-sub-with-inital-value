{"code":"import { PubSub } from 'graphql-subscriptions';\r\nexport class PubSubIntialValue extends PubSub {\r\n    withInitialValue(iterator, getInitialValue) {\r\n        return {\r\n            [Symbol.asyncIterator]() { return this; },\r\n            initialValuePushed: false,\r\n            next(value) {\r\n                if (this.initialValuePushed) {\r\n                    return iterator.next(value).then(({ value, done }) => ({\r\n                        done,\r\n                        value\r\n                    }));\r\n                }\r\n                else {\r\n                    return getInitialValue().then((value) => {\r\n                        this.initialValuePushed = true;\r\n                        return { done: false, value };\r\n                    });\r\n                }\r\n            },\r\n            return(value) {\r\n                return iterator.return(value);\r\n            },\r\n            throw(value) {\r\n                return iterator.throw(value);\r\n            }\r\n        };\r\n    }\r\n    asyncIteratorWithInitialState(topic, initialValueFn) {\r\n        return this.withInitialValue(this.asyncIterator(topic), () => initialValueFn());\r\n    }\r\n}\r\n//# sourceMappingURL=index.js.map","map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/index.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,uBAAuB,CAAA;AAM9C,MAAM,OAAO,iBAAkB,SAAQ,MAAM;IACnC,gBAAgB,CAAI,QAA0B,EAAE,eAAiC;QACvF,OAAO;YACL,CAAC,MAAM,CAAC,aAAa,CAAC,KAA+B,OAAO,IAAI,CAAA,CAAC,CAAC;YAClE,kBAAkB,EAAE,KAAK;YACzB,IAAI,CAAC,KAAe;gBAClB,IAAI,IAAI,CAAC,kBAAkB,EAAE;oBAC3B,OAAO,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,EAAqB,EAAqB,EAAE,CAAC,CAAC;wBAC3F,IAAI;wBACJ,KAAK;qBACN,CAAC,CAAC,CAAA;iBACJ;qBAAM;oBACL,OAAO,eAAe,EAAE,CAAC,IAAI,CAAC,CAAC,KAAQ,EAAqB,EAAE;wBAC5D,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAA;wBAC9B,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,CAAA;oBAC/B,CAAC,CAAC,CAAA;iBACH;YACH,CAAC;YACD,MAAM,CAAC,KAAe;gBACpB,OAAO,QAAQ,CAAC,MAAO,CAAC,KAAK,CAAC,CAAA;YAChC,CAAC;YACD,KAAK,CAAC,KAAe;gBACnB,OAAO,QAAQ,CAAC,KAAM,CAAC,KAAK,CAAC,CAAA;YAC/B,CAAC;SACF,CAAA;IACH,CAAC;IAEM,6BAA6B,CAAI,KAAwB,EAAE,cAAgC;QAChG,OAAO,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,aAAa,CAAI,KAAK,CAAC,EAAE,GAAe,EAAE,CAAC,cAAc,EAAE,CAAC,CAAA;IAChG,CAAC;CACF\"}"}
